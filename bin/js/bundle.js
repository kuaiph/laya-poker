var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameView = require("./view/GameView");

var _GameView2 = _interopRequireDefault(_GameView);

var _Seat = require("./sprite/Seat");

var _Seat2 = _interopRequireDefault(_Seat);

var _Start = require("./sprite/Start");

var _Start2 = _interopRequireDefault(_Start);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("view/GameView.js", _GameView2.default);
            reg("sprite/Seat.js", _Seat2.default);
            reg("sprite/Start.js", _Start2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 370;
GameConfig.height = 658;
GameConfig.scaleMode = "showall";
GameConfig.screenMode = "none";
GameConfig.alignV = "middle";
GameConfig.alignH = "center";
GameConfig.startScene = "Start.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./sprite/Seat":4,"./sprite/Start":5,"./view/GameView":7}],2:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require('./GameConfig');

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _WebSocket = require('./util/WebSocket');

var _WebSocket2 = _interopRequireDefault(_WebSocket);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
    function Main() {
        _classCallCheck(this, Main);

        //根据IDE设置初始化引擎
        if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
        Laya.stage.screenMode = _GameConfig2.default.screenMode;
        Laya.stage.alignV = _GameConfig2.default.alignV;
        Laya.stage.alignH = _GameConfig2.default.alignH;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
        if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
        if (_GameConfig2.default.stat) Laya.Stat.show();
        Laya.alertGlobalError = true;

        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
        //加载网络连接
        new _WebSocket2.default().init();
    }

    _createClass(Main, [{
        key: 'onVersionLoaded',
        value: function onVersionLoaded() {
            //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
            Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
        }
    }, {
        key: 'onConfigLoaded',
        value: function onConfigLoaded() {
            //加载IDE指定的场景
            _GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
            // beginLoad()
        }
        // // 加载资源
        // beginLoad() {
        //     // 加载图集
        //     Laya.loader.load("res/atlas/ui.atlas", Laya.Handler.create(this, this.onLoaded), null, Laya.Loader.ATLAS)
        //     // 播放背景音乐
        //     // Laya.SoundManager.playMusic("res/sounds/bgm.mp3", 0, null)
        // }
        // // 加载完成回调
        // onLoaded() {
        //     // 启动游戏界面
        //     LayaApp.gameView = new GameView()
        //     Laya.stage.addChild(LayaApp.gameView)
        //     // LayaApp.gameStartView = new GameStartView()
        //     // Laya.stage.addChild(LayaApp.gameStartView)
        // }

    }]);

    return Main;
}();

//激活启动类


new Main();

},{"./GameConfig":1,"./util/WebSocket":6}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * 扑克类
 */
var Poker = function () {
    function Poker(inparam) {
        _classCallCheck(this, Poker);

        this.pokerImg = inparam.pokerImg;
        this.seatImg = inparam.seatImg;
        this.dataPoker = inparam.dataPoker;
        this.isMe = false;
        // this.reset()
    }
    // 重置


    _createClass(Poker, [{
        key: 'reset',
        value: function reset() {}
        // 隐藏

    }, {
        key: 'hide',
        value: function hide() {
            this.pokerImg.visible = false;
        }
        // 发牌

    }, {
        key: 'send',
        value: function send(pokerSentIndex) {
            this.isMe = this.seatImg.name == 'seat0' ? true : false;
            var x = this.seatImg.x;
            if (this.isMe) {
                pokerSentIndex == 0 ? x += 50 : x += 100;
            }
            Laya.Tween.to(this.pokerImg, { x: x, y: this.seatImg.y }, 500, Laya.Ease.strongOut, Laya.Handler.create(this, this.sendComplete));
        }
        // 手牌发牌完成

    }, {
        key: 'sendComplete',
        value: function sendComplete() {
            if (!this.isMe) {
                this.pokerImg.visible = false;
            } else {
                this.pokerImg.skin = 'ui/' + this.dataPoker.card + '.png';
            }
        }
        // 发公共牌

    }, {
        key: 'sendPublic',
        value: function sendPublic(publicIndex) {
            var x = this.pokerImg.x;
            var y = this.pokerImg.y + 80;
            switch (publicIndex) {
                case 0:
                    x -= 110;
                    break;
                case 1:
                    x -= 55;
                    break;
                case 2:
                    break;
                case 3:
                    x += 55;
                    break;
                case 4:
                    x += 110;
                    break;
                default:
                    break;
            }
            Laya.Tween.to(this.pokerImg, { x: x, y: y }, 500, Laya.Ease.strongOut, Laya.Handler.create(this, this.sendPublicComplete));
        }
        // 公牌发牌完成

    }, {
        key: 'sendPublicComplete',
        value: function sendPublicComplete() {
            this.pokerImg.skin = 'ui/' + this.dataPoker.card + '.png';
        }
    }]);

    return Poker;
}();

exports.default = Poker;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _WebSocket = require('../util/WebSocket');

var _WebSocket2 = _interopRequireDefault(_WebSocket);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Start = function (_Laya$Script) {
    _inherits(Start, _Laya$Script);

    function Start() {
        _classCallCheck(this, Start);

        return _possibleConstructorReturn(this, (Start.__proto__ || Object.getPrototypeOf(Start)).apply(this, arguments));
    }

    _createClass(Start, [{
        key: 'onEnable',
        value: function onEnable() {}
    }, {
        key: 'onClick',
        value: function onClick() {
            _WebSocket2.default.send({ method: 'SIT_DOWN', user: _WebSocket2.default.globalData.user, seatId: this.owner.name });
            // .then((data) => {
            //     if (data.status == 0) {
            //         // WebSocket.globalData.seats[this.owner.name.slice(4)].seatStatus = 1          // 设置就坐状态
            //         this.owner.skin = `ui/${data.seat.headurl}`                               // 设置就坐图片
            //         if (data.seatNum) {
            //             let num = data.seatNum.slice(4)
            //             // WebSocket.globalData.seats[num].seatStatus = 0                           // 设置离开状态
            //             WebSocket.globalData.seats[num].skin = 'ui/head.png'                     // 设置初始图片
            //         }
            //         // 服务器决定是否开始发牌
            //         WebSocket.globalData.isBegin = data.isBegin
            //     }
            // })
        }
    }]);

    return Start;
}(Laya.Script);

exports.default = Start;

},{"../util/WebSocket":6}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _WebSocket = require('../util/WebSocket');

var _WebSocket2 = _interopRequireDefault(_WebSocket);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Start = function (_Laya$Script) {
    _inherits(Start, _Laya$Script);

    function Start() {
        _classCallCheck(this, Start);

        return _possibleConstructorReturn(this, (Start.__proto__ || Object.getPrototypeOf(Start)).apply(this, arguments));
    }

    _createClass(Start, [{
        key: 'onEnable',
        value: function onEnable() {}
    }, {
        key: 'onClick',
        value: function onClick() {
            var userId = 123456;
            _WebSocket2.default.send({ method: 'JOIN_TABLE', userId: userId }).then(function (data) {
                if (data.status == 0) {
                    _WebSocket2.default.globalData = { user: data.user, seatArr: data.seatArr };
                    Laya.Scene.open('Game.scene');
                }
            });
        }
    }]);

    return Start;
}(Laya.Script);

exports.default = Start;

},{"../util/WebSocket":6}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * 网络长连接类
 */
var WebSocket = function () {
    function WebSocket() {
        _classCallCheck(this, WebSocket);

        WebSocket.instance = this;
        // 长连接服务器
        WebSocket.socket = new Laya.Socket();
        WebSocket.socket.endian = Laya.Byte.LITTLE_ENDIAN; //采用小端
    }

    _createClass(WebSocket, [{
        key: 'init',
        value: function init() {
            var _this = this;

            // ws://192.168.3.224:4000/socket/poker
            WebSocket.socket.connectByUrl('ws://localhost:5000/socket/poker');
            WebSocket.socket.on(Laya.Event.OPEN, this, function (e) {
                console.log('连接建立');
            });
            WebSocket.socket.on(Laya.Event.CLOSE, this, function (e) {
                console.log('连接关闭');
            });
            WebSocket.socket.on(Laya.Event.ERROR, this, function (e) {
                console.error('连接出错');
            });
            // 封装发送数据方法
            WebSocket.send = function (req) {
                // try {
                return new Promise(function (resolve, reject) {
                    WebSocket.socket.send(JSON.stringify(req));
                    // 返回数据
                    WebSocket.socket.on(Laya.Event.MESSAGE, _this, function (res) {
                        res = JSON.parse(res);
                        if (req.method == res.method) {
                            resolve(res);
                        }
                    });
                });
                // } catch (error) {
                //     setTimeout(() => {
                //         console.log(`重试发送：${data}`)
                //         WebSocket.send(data)
                //     }, 500)
                // }
            };
            WebSocket.socket.on(Laya.Event.MESSAGE, this, function (res) {
                res = JSON.parse(res);
                switch (res.method) {
                    // case 'JOIN_TABLE':
                    //     if (res.status == 0) {
                    //         for (let seat of res.seatArr) {
                    //             WebSocket.globalData.seats[seat.seatId].skin = `ui/${seat.headurl}`  // 设置就坐图片
                    //         }
                    //     }
                    //     break;
                    case 'SIT_DOWN':
                        if (res.status == 0) {
                            // WebSocket.globalData.seats[this.owner.name.slice(4)].seatStatus = 1      // 设置就坐状态
                            WebSocket.globalData.seats[res.seatNum].skin = 'ui/' + res.seat.headurl; // 设置就坐图片
                            if (res.oldSeatId) {
                                var oldSeatNum = res.oldSeatId.slice(4);
                                // WebSocket.globalData.seats[oldSeatNum].seatStatus = 0                // 设置初始状态
                                WebSocket.globalData.seats[oldSeatNum].skin = 'ui/head.png'; // 设置初始图片
                            }
                            // 服务器决定是否开始发牌
                            WebSocket.globalData.isBegin = res.isBegin;
                        }
                        break;
                    case 'CLOSE':
                        if (res.status == 0) {
                            WebSocket.globalData.seats[res.seatNum].skin = 'ui/head.png'; // 设置就坐图片   
                        }
                        break;
                    default:
                        break;
                }
            });
        }
    }]);

    return WebSocket;
}();

exports.default = WebSocket;

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _WebSocket = require('../util/WebSocket');

var _WebSocket2 = _interopRequireDefault(_WebSocket);

var _Poker = require('../sprite/Poker');

var _Poker2 = _interopRequireDefault(_Poker);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * 游戏主界面类
 * 载入扑克桌
 */
var GameView = function (_Laya$Scene) {
    _inherits(GameView, _Laya$Scene);

    function GameView() {
        _classCallCheck(this, GameView);

        //设置单例的引用方式，方便其他类引用
        var _this = _possibleConstructorReturn(this, (GameView.__proto__ || Object.getPrototypeOf(GameView)).call(this));

        GameView.instance = _this;
        _this.seatCount = 9; // 座位数量    
        _this.seats = []; // 座位数组           
        _this.pokers = []; // 扑克牌数组
        _this.pokerSentIndex = 0; // 已发牌索引
        _this.pokerHandCount = _this.seatCount * 2; // 手牌数量
        _this.pokerCount = _this.pokerHandCount + 5; // 所有牌数量
        _this.chip2Index = 0; // 大盲位索引
        return _this;
    }

    _createClass(GameView, [{
        key: 'onEnable',
        value: function onEnable() {
            // 初始化
            this.init();
        }
    }, {
        key: 'onClosed',
        value: function onClosed() {
            _WebSocket2.default.socket.close();
        }
        // 初始化

    }, {
        key: 'init',
        value: function init() {
            // 初始化座位
            for (var i = 0; i < this.seatCount; i++) {
                // 此处需要初始化座位头像
                this.seats.push(this.getChildByName('seat' + i));
            }
            _WebSocket2.default.globalData.seats = this.seats;
            // 加载鼠标点击事件
            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);
        }
        // 游戏启动

    }, {
        key: 'gameStart',
        value: function gameStart() {
            // 每人发两张牌
            Laya.timer.loop(300, this, this.onSendPoker); // 每300毫循环一次
            // Laya.timer.frameLoop(10, this, this.onLoop) // 每10帧循环一次
        }
        // 发牌

    }, {
        key: 'onSendPoker',
        value: function onSendPoker() {
            this.pokers[this.pokerSentIndex].send(this.pokerSentIndex);
            this.pokerSentIndex++;
            // 手牌发牌结束
            if (this.pokerSentIndex == this.pokerHandCount) {
                // 隐藏剩余牌，为展开公牌做准备
                // for (let i = this.pokerSentIndex + 1; i <= 22; i++) {
                //     this.pokers[i].hide()
                // }
                Laya.timer.clear(this, this.onSendPoker);
            }
        }

        // 鼠标点击事件

    }, {
        key: 'onMouseDown',
        value: function onMouseDown() {
            var _this2 = this;

            // 每局游戏新开始，并且就坐人数大于2
            if (this.pokerSentIndex == 0 && _WebSocket2.default.globalData.isBegin) {
                // 初始化牌组
                _WebSocket2.default.send({ method: 'SEND_CARD', count: this.pokerCount }).then(function (data) {
                    for (var i = 0; i < data.pokers.length; i++) {
                        var poker = {};
                        // 手牌
                        if (i < _this2.pokerHandCount) {
                            poker = new _Poker2.default({ pokerImg: _this2.getChildByName('poker' + i), seatImg: _this2.seats[i % _this2.seatCount], dataPoker: data.pokers[i] });
                        }
                        // 公牌
                        else {
                                poker = new _Poker2.default({ pokerImg: _this2.getChildByName('poker' + i), dataPoker: data.pokers[i] });
                            }
                        _this2.pokers.push(poker);
                    }
                    // 启动游戏
                    _this2.gameStart();
                });
            }
            // 发放公共牌
            if (this.pokerSentIndex >= this.pokerHandCount && this.pokerSentIndex < this.pokerCount) {
                Laya.timer.loop(300, this, this.onShowPublicPoker);
            }
            if (this.chip2Index >= this.seats.length) {
                this.chip2Index = 0;
            }
            // 小盲移动到大盲位置
            this.chip1.x = this.chip2.x;
            this.chip1.y = this.chip2.y;
            this.chipText1.x = this.chipText2.x;
            this.chipText1.y = this.chipText2.y;
            // 大盲顺时针移动
            this.chip2.x = this.seats[this.chip2Index].x + 10;
            this.chip2.y = this.seats[this.chip2Index].y - 30;
            this.chipText2.x = this.chip2.x - 10;
            this.chipText2.y = this.chip2.y - 15;
            this.chip2Index++;
        }

        // 展开三张公牌

    }, {
        key: 'onShowPublicPoker',
        value: function onShowPublicPoker() {
            this.pokers[this.pokerSentIndex].sendPublic(this.pokerSentIndex - this.pokerHandCount);
            this.pokerSentIndex++;
            // 发牌行为结束
            if (this.pokerSentIndex >= this.pokerHandCount + 3) {
                Laya.timer.clear(this, this.onShowPublicPoker);
            }
        }
    }]);

    return GameView;
}(Laya.Scene);

exports.default = GameView;

},{"../sprite/Poker":3,"../util/WebSocket":6}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9MYXlhQWlySURFX2JldGEuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLmpzIiwic3JjL01haW4uanMiLCJzcmMvc3ByaXRlL1Bva2VyLmpzIiwic3JjL3Nwcml0ZS9TZWF0LmpzIiwic3JjL3Nwcml0ZS9TdGFydC5qcyIsInNyYy91dGlsL1dlYlNvY2tldC5qcyIsInNyYy92aWV3L0dhbWVWaWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7cWpCQ1ZBOzs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7O0lBRXFCLFU7Ozs7Ozs7K0JBQ0g7QUFDVjtBQUNBLGdCQUFJLE1BQU0sS0FBSyxVQUFMLENBQWdCLFFBQTFCO0FBQ04sZ0JBQUksa0JBQUosRUFBdUIsa0JBQXZCO0FBQ0EsZ0JBQUksZ0JBQUosRUFBcUIsY0FBckI7QUFDQSxnQkFBSSxpQkFBSixFQUFzQixlQUF0QjtBQUNHOzs7Ozs7a0JBUGdCLFU7O0FBU3JCLFdBQVcsS0FBWCxHQUFtQixHQUFuQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixHQUFwQjtBQUNBLFdBQVcsU0FBWCxHQUFzQixTQUF0QjtBQUNBLFdBQVcsVUFBWCxHQUF3QixNQUF4QjtBQUNBLFdBQVcsTUFBWCxHQUFvQixRQUFwQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixRQUFwQjtBQUNBLFdBQVcsVUFBWCxHQUF3QixhQUF4QjtBQUNBLFdBQVcsU0FBWCxHQUF1QixFQUF2QjtBQUNBLFdBQVcsS0FBWCxHQUFtQixLQUFuQjtBQUNBLFdBQVcsSUFBWCxHQUFrQixLQUFsQjtBQUNBLFdBQVcsWUFBWCxHQUEwQixLQUExQjtBQUNBLFdBQVcsaUJBQVgsR0FBK0IsSUFBL0I7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O0FBQ0g7QUFDRDtBQUNBLGlCQUFLLEtBQUwsQ0FBVyxDQUFYLEdBQWUsS0FBSyxLQUFMLENBQVcsQ0FBMUI7QUFDQSxpQkFBSyxLQUFMLENBQVcsQ0FBWCxHQUFlLEtBQUssS0FBTCxDQUFXLENBQTFCO0FBQ0EsaUJBQUssU0FBTCxDQUFlLENBQWYsR0FBbUIsS0FBSyxTQUFMLENBQWUsQ0FBbEM7QUFDQSxpQkFBSyxTQUFMLENBQWUsQ0FBZixHQUFtQixLQUFLLFNBQUwsQ0FBZSxDQUFsQztBQUNBO0FBQ0EsaUJBQUssS0FBTCxDQUFXLENBQVgsR0FBZSxLQUFLLEtBQUwsQ0FBVyxLQUFLLFVBQWhCLEVBQTRCLENBQTVCLEdBQWdDLEVBQS9DO0FBQ0EsaUJBQUssS0FBTCxDQUFXLENBQVgsR0FBZSxLQUFLLEtBQUwsQ0FBVyxLQUFLLFVBQWhCLEVBQTRCLENBQTVCLEdBQWdDLEVBQS9DO0FBQ0EsaUJBQUssU0FBTCxDQUFlLENBQWYsR0FBbUIsS0FBSyxLQUFMLENBQVcsQ0FBWCxHQUFlLEVBQWxDO0FBQ0EsaUJBQUssU0FBTCxDQUFlLENBQWYsR0FBbUIsS0FBSyxLQUFMLENBQVcsQ0FBWCxHQUFlLEVBQWxDO0FBQ0EsaUJBQUssVUFBTDtBQUNIOztBQUVEOzs7OzRDQUNvQjtBQUNoQixpQkFBSyxNQUFMLENBQVksS0FBSyxjQUFqQixFQUFpQyxVQUFqQyxDQUE0QyxLQUFLLGNBQUwsR0FBc0IsS0FBSyxjQUF2RTtBQUNBLGlCQUFLLGNBQUw7QUFDQTtBQUNBLGdCQUFJLEtBQUssY0FBTCxJQUF1QixLQUFLLGNBQUwsR0FBc0IsQ0FBakQsRUFBb0Q7QUFDaEQscUJBQUssS0FBTCxDQUFXLEtBQVgsQ0FBaUIsSUFBakIsRUFBdUIsS0FBSyxpQkFBNUI7QUFDSDtBQUNKOzs7O0VBckdpQyxLQUFLLEs7O2tCQUF0QixRIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgR2FtZVZpZXcgZnJvbSBcIi4vdmlldy9HYW1lVmlld1wiXG5pbXBvcnQgU2VhdCBmcm9tIFwiLi9zcHJpdGUvU2VhdFwiXG5pbXBvcnQgU3RhcnQgZnJvbSBcIi4vc3ByaXRlL1N0YXJ0XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWcge1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy/ms6jlhoxTY3JpcHTmiJbogIVSdW50aW1l5byV55SoXHJcbiAgICAgICAgbGV0IHJlZyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHRcdHJlZyhcInZpZXcvR2FtZVZpZXcuanNcIixHYW1lVmlldyk7XG5cdFx0cmVnKFwic3ByaXRlL1NlYXQuanNcIixTZWF0KTtcblx0XHRyZWcoXCJzcHJpdGUvU3RhcnQuanNcIixTdGFydCk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDM3MDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSA2NTg7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cInNob3dhbGxcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJub25lXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJtaWRkbGVcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImNlbnRlclwiO1xyXG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcIlN0YXJ0LnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSAnLi9HYW1lQ29uZmlnJ1xyXG5pbXBvcnQgV2ViU29ja2V0IGZyb20gJy4vdXRpbC9XZWJTb2NrZXQnXHJcblxyXG5jbGFzcyBNYWluIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHJcbiAgICAgICAgaWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG4gICAgICAgIGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG4gICAgICAgIExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG4gICAgICAgIExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG4gICAgICAgIExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG4gICAgICAgIExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5hbGlnbkggPSBHYW1lQ29uZmlnLmFsaWduSDtcclxuICAgICAgICAvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcbiAgICAgICAgTGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uXHJcblxyXG4gICAgICAgIC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG4gICAgICAgIGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcbiAgICAgICAgaWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuICAgICAgICBpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG4gICAgICAgIExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG4gICAgICAgIC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcbiAgICAgICAgTGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKVxyXG4gICAgICAgIC8v5Yqg6L29572R57uc6L+e5o6lXHJcbiAgICAgICAgbmV3IFdlYlNvY2tldCgpLmluaXQoKVxyXG4gICAgfVxyXG4gICAgb25WZXJzaW9uTG9hZGVkKCkge1xyXG4gICAgICAgIC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcbiAgICAgICAgTGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKVxyXG4gICAgfVxyXG4gICAgb25Db25maWdMb2FkZWQoKSB7XHJcbiAgICAgICAgLy/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuICAgICAgICBHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSlcclxuICAgICAgICAvLyBiZWdpbkxvYWQoKVxyXG4gICAgfVxyXG4gICAgLy8gLy8g5Yqg6L296LWE5rqQXHJcbiAgICAvLyBiZWdpbkxvYWQoKSB7XHJcbiAgICAvLyAgICAgLy8g5Yqg6L295Zu+6ZuGXHJcbiAgICAvLyAgICAgTGF5YS5sb2FkZXIubG9hZChcInJlcy9hdGxhcy91aS5hdGxhc1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkZWQpLCBudWxsLCBMYXlhLkxvYWRlci5BVExBUylcclxuICAgIC8vICAgICAvLyDmkq3mlL7og4zmma/pn7PkuZBcclxuICAgIC8vICAgICAvLyBMYXlhLlNvdW5kTWFuYWdlci5wbGF5TXVzaWMoXCJyZXMvc291bmRzL2JnbS5tcDNcIiwgMCwgbnVsbClcclxuICAgIC8vIH1cclxuICAgIC8vIC8vIOWKoOi9veWujOaIkOWbnuiwg1xyXG4gICAgLy8gb25Mb2FkZWQoKSB7XHJcbiAgICAvLyAgICAgLy8g5ZCv5Yqo5ri45oiP55WM6Z2iXHJcbiAgICAvLyAgICAgTGF5YUFwcC5nYW1lVmlldyA9IG5ldyBHYW1lVmlldygpXHJcbiAgICAvLyAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZChMYXlhQXBwLmdhbWVWaWV3KVxyXG4gICAgLy8gICAgIC8vIExheWFBcHAuZ2FtZVN0YXJ0VmlldyA9IG5ldyBHYW1lU3RhcnRWaWV3KClcclxuICAgIC8vICAgICAvLyBMYXlhLnN0YWdlLmFkZENoaWxkKExheWFBcHAuZ2FtZVN0YXJ0VmlldylcclxuICAgIC8vIH1cclxufVxyXG5cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKVxyXG5cclxuIiwiLyoqXG4gKiDmiZHlhYvnsbtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9rZXIge1xuICAgIGNvbnN0cnVjdG9yKGlucGFyYW0pIHtcbiAgICAgICAgdGhpcy5wb2tlckltZyA9IGlucGFyYW0ucG9rZXJJbWdcbiAgICAgICAgdGhpcy5zZWF0SW1nID0gaW5wYXJhbS5zZWF0SW1nXG4gICAgICAgIHRoaXMuZGF0YVBva2VyID0gaW5wYXJhbS5kYXRhUG9rZXJcbiAgICAgICAgdGhpcy5pc01lID0gZmFsc2VcbiAgICAgICAgLy8gdGhpcy5yZXNldCgpXG4gICAgfVxuICAgIC8vIOmHjee9rlxuICAgIHJlc2V0KCkge1xuICAgIH1cbiAgICAvLyDpmpDol49cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLnBva2VySW1nLnZpc2libGUgPSBmYWxzZVxuICAgIH1cbiAgICAvLyDlj5HniYxcbiAgICBzZW5kKHBva2VyU2VudEluZGV4KSB7XG4gICAgICAgIHRoaXMuaXNNZSA9IHRoaXMuc2VhdEltZy5uYW1lID09ICdzZWF0MCcgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgbGV0IHggPSB0aGlzLnNlYXRJbWcueFxuICAgICAgICBpZiAodGhpcy5pc01lKSB7XG4gICAgICAgICAgICBwb2tlclNlbnRJbmRleCA9PSAwID8geCArPSA1MCA6IHggKz0gMTAwXG4gICAgICAgIH1cbiAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBva2VySW1nLCB7IHgsIHk6IHRoaXMuc2VhdEltZy55IH0sIDUwMCwgTGF5YS5FYXNlLnN0cm9uZ091dCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLnNlbmRDb21wbGV0ZSkpXG4gICAgfVxuICAgIC8vIOaJi+eJjOWPkeeJjOWujOaIkFxuICAgIHNlbmRDb21wbGV0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTWUpIHtcbiAgICAgICAgICAgIHRoaXMucG9rZXJJbWcudmlzaWJsZSA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBva2VySW1nLnNraW4gPSBgdWkvJHt0aGlzLmRhdGFQb2tlci5jYXJkfS5wbmdgXG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8g5Y+R5YWs5YWx54mMXG4gICAgc2VuZFB1YmxpYyhwdWJsaWNJbmRleCkge1xuICAgICAgICBsZXQgeCA9IHRoaXMucG9rZXJJbWcueFxuICAgICAgICBsZXQgeSA9IHRoaXMucG9rZXJJbWcueSArIDgwXG4gICAgICAgIHN3aXRjaCAocHVibGljSW5kZXgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICB4IC09IDExMFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHggLT0gNTVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB4ICs9IDU1XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgeCArPSAxMTBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBva2VySW1nLCB7IHgsIHkgfSwgNTAwLCBMYXlhLkVhc2Uuc3Ryb25nT3V0LCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMuc2VuZFB1YmxpY0NvbXBsZXRlKSlcbiAgICB9XG4gICAgLy8g5YWs54mM5Y+R54mM5a6M5oiQXG4gICAgc2VuZFB1YmxpY0NvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLnBva2VySW1nLnNraW4gPSBgdWkvJHt0aGlzLmRhdGFQb2tlci5jYXJkfS5wbmdgXG4gICAgfVxufSIsImltcG9ydCBXZWJTb2NrZXQgZnJvbSAnLi4vdXRpbC9XZWJTb2NrZXQnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXJ0IGV4dGVuZHMgTGF5YS5TY3JpcHQge1xuICAgIG9uRW5hYmxlKCkge1xuICAgIH1cbiAgICBvbkNsaWNrKCkge1xuICAgICAgICBXZWJTb2NrZXQuc2VuZCh7IG1ldGhvZDogJ1NJVF9ET1dOJywgdXNlcjogV2ViU29ja2V0Lmdsb2JhbERhdGEudXNlciwgc2VhdElkOiB0aGlzLm93bmVyLm5hbWUgfSlcbiAgICAgICAgLy8gLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgLy8gICAgIGlmIChkYXRhLnN0YXR1cyA9PSAwKSB7XG4gICAgICAgIC8vICAgICAgICAgLy8gV2ViU29ja2V0Lmdsb2JhbERhdGEuc2VhdHNbdGhpcy5vd25lci5uYW1lLnNsaWNlKDQpXS5zZWF0U3RhdHVzID0gMSAgICAgICAgICAvLyDorr7nva7lsLHlnZDnirbmgIFcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm93bmVyLnNraW4gPSBgdWkvJHtkYXRhLnNlYXQuaGVhZHVybH1gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiuvue9ruWwseWdkOWbvueJh1xuICAgICAgICAvLyAgICAgICAgIGlmIChkYXRhLnNlYXROdW0pIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgbGV0IG51bSA9IGRhdGEuc2VhdE51bS5zbGljZSg0KVxuICAgICAgICAvLyAgICAgICAgICAgICAvLyBXZWJTb2NrZXQuZ2xvYmFsRGF0YS5zZWF0c1tudW1dLnNlYXRTdGF0dXMgPSAwICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u56a75byA54q25oCBXG4gICAgICAgIC8vICAgICAgICAgICAgIFdlYlNvY2tldC5nbG9iYWxEYXRhLnNlYXRzW251bV0uc2tpbiA9ICd1aS9oZWFkLnBuZycgICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7liJ3lp4vlm77niYdcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgLy8g5pyN5Yqh5Zmo5Yaz5a6a5piv5ZCm5byA5aeL5Y+R54mMXG4gICAgICAgIC8vICAgICAgICAgV2ViU29ja2V0Lmdsb2JhbERhdGEuaXNCZWdpbiA9IGRhdGEuaXNCZWdpblxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KVxuXG4gICAgfVxufSIsImltcG9ydCBXZWJTb2NrZXQgZnJvbSAnLi4vdXRpbC9XZWJTb2NrZXQnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXJ0IGV4dGVuZHMgTGF5YS5TY3JpcHQge1xuICAgIG9uRW5hYmxlKCkge1xuXG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIGxldCB1c2VySWQgPSAxMjM0NTZcbiAgICAgICAgV2ViU29ja2V0LnNlbmQoeyBtZXRob2Q6ICdKT0lOX1RBQkxFJywgdXNlcklkIH0pLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgV2ViU29ja2V0Lmdsb2JhbERhdGEgPSB7IHVzZXI6IGRhdGEudXNlciwgc2VhdEFycjogZGF0YS5zZWF0QXJyIH1cbiAgICAgICAgICAgICAgICBMYXlhLlNjZW5lLm9wZW4oJ0dhbWUuc2NlbmUnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0iLCIvKipcbiAqIOe9kee7nOmVv+i/nuaOpeexu1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJTb2NrZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBXZWJTb2NrZXQuaW5zdGFuY2UgPSB0aGlzXG4gICAgICAgIC8vIOmVv+i/nuaOpeacjeWKoeWZqFxuICAgICAgICBXZWJTb2NrZXQuc29ja2V0ID0gbmV3IExheWEuU29ja2V0KClcbiAgICAgICAgV2ViU29ja2V0LnNvY2tldC5lbmRpYW4gPSBMYXlhLkJ5dGUuTElUVExFX0VORElBTi8v6YeH55So5bCP56uvXG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIHdzOi8vMTkyLjE2OC4zLjIyNDo0MDAwL3NvY2tldC9wb2tlclxuICAgICAgICBXZWJTb2NrZXQuc29ja2V0LmNvbm5lY3RCeVVybCgnd3M6Ly9sb2NhbGhvc3Q6NTAwMC9zb2NrZXQvcG9rZXInKVxuICAgICAgICBXZWJTb2NrZXQuc29ja2V0Lm9uKExheWEuRXZlbnQuT1BFTiwgdGhpcywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfov57mjqXlu7rnq4snKVxuICAgICAgICB9KVxuICAgICAgICBXZWJTb2NrZXQuc29ja2V0Lm9uKExheWEuRXZlbnQuQ0xPU0UsIHRoaXMsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6L+e5o6l5YWz6ZetJylcbiAgICAgICAgfSlcbiAgICAgICAgV2ViU29ja2V0LnNvY2tldC5vbihMYXlhLkV2ZW50LkVSUk9SLCB0aGlzLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign6L+e5o6l5Ye66ZSZJylcbiAgICAgICAgfSlcbiAgICAgICAgLy8g5bCB6KOF5Y+R6YCB5pWw5o2u5pa55rOVXG4gICAgICAgIFdlYlNvY2tldC5zZW5kID0gKHJlcSkgPT4ge1xuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgV2ViU29ja2V0LnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlcSkpXG4gICAgICAgICAgICAgICAgLy8g6L+U5Zue5pWw5o2uXG4gICAgICAgICAgICAgICAgV2ViU29ja2V0LnNvY2tldC5vbihMYXlhLkV2ZW50Lk1FU1NBR0UsIHRoaXMsIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEubWV0aG9kID09IHJlcy5tZXRob2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhg6YeN6K+V5Y+R6YCB77yaJHtkYXRhfWApXG4gICAgICAgICAgICAvLyAgICAgICAgIFdlYlNvY2tldC5zZW5kKGRhdGEpXG4gICAgICAgICAgICAvLyAgICAgfSwgNTAwKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgICAgIFdlYlNvY2tldC5zb2NrZXQub24oTGF5YS5FdmVudC5NRVNTQUdFLCB0aGlzLCAocmVzKSA9PiB7XG4gICAgICAgICAgICByZXMgPSBKU09OLnBhcnNlKHJlcylcbiAgICAgICAgICAgIHN3aXRjaCAocmVzLm1ldGhvZCkge1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0pPSU5fVEFCTEUnOlxuICAgICAgICAgICAgICAgIC8vICAgICBpZiAocmVzLnN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBmb3IgKGxldCBzZWF0IG9mIHJlcy5zZWF0QXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgV2ViU29ja2V0Lmdsb2JhbERhdGEuc2VhdHNbc2VhdC5zZWF0SWRdLnNraW4gPSBgdWkvJHtzZWF0LmhlYWR1cmx9YCAgLy8g6K6+572u5bCx5Z2Q5Zu+54mHXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnU0lUX0RPV04nOlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWJTb2NrZXQuZ2xvYmFsRGF0YS5zZWF0c1t0aGlzLm93bmVyLm5hbWUuc2xpY2UoNCldLnNlYXRTdGF0dXMgPSAxICAgICAgLy8g6K6+572u5bCx5Z2Q54q25oCBXG4gICAgICAgICAgICAgICAgICAgICAgICBXZWJTb2NrZXQuZ2xvYmFsRGF0YS5zZWF0c1tyZXMuc2VhdE51bV0uc2tpbiA9IGB1aS8ke3Jlcy5zZWF0LmhlYWR1cmx9YCAgICAgLy8g6K6+572u5bCx5Z2Q5Zu+54mHXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm9sZFNlYXRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRTZWF0TnVtID0gcmVzLm9sZFNlYXRJZC5zbGljZSg0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlYlNvY2tldC5nbG9iYWxEYXRhLnNlYXRzW29sZFNlYXROdW1dLnNlYXRTdGF0dXMgPSAwICAgICAgICAgICAgICAgIC8vIOiuvue9ruWIneWni+eKtuaAgVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYlNvY2tldC5nbG9iYWxEYXRhLnNlYXRzW29sZFNlYXROdW1dLnNraW4gPSAndWkvaGVhZC5wbmcnICAgICAgICAgICAgIC8vIOiuvue9ruWIneWni+WbvueJh1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyN5Yqh5Zmo5Yaz5a6a5piv5ZCm5byA5aeL5Y+R54mMXG4gICAgICAgICAgICAgICAgICAgICAgICBXZWJTb2NrZXQuZ2xvYmFsRGF0YS5pc0JlZ2luID0gcmVzLmlzQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdDTE9TRSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYlNvY2tldC5nbG9iYWxEYXRhLnNlYXRzW3Jlcy5zZWF0TnVtXS5za2luID0gYHVpL2hlYWQucG5nYCAgICAgICAgICAgICAgICAvLyDorr7nva7lsLHlnZDlm77niYcgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IFdlYlNvY2tldCBmcm9tICcuLi91dGlsL1dlYlNvY2tldCdcbmltcG9ydCBQb2tlciBmcm9tICcuLi9zcHJpdGUvUG9rZXInXG5cbi8qKlxuICog5ri45oiP5Li755WM6Z2i57G7XG4gKiDovb3lhaXmiZHlhYvmoYxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVZpZXcgZXh0ZW5kcyBMYXlhLlNjZW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICAvL+iuvue9ruWNleS+i+eahOW8leeUqOaWueW8j++8jOaWueS+v+WFtuS7luexu+W8leeUqFxuICAgICAgICBHYW1lVmlldy5pbnN0YW5jZSA9IHRoaXNcbiAgICAgICAgdGhpcy5zZWF0Q291bnQgPSA5ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDluqfkvY3mlbDph48gICAgXG4gICAgICAgIHRoaXMuc2VhdHMgPSBbXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bqn5L2N5pWw57uEICAgICAgICAgICBcbiAgICAgICAgdGhpcy5wb2tlcnMgPSBbXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmiZHlhYvniYzmlbDnu4RcbiAgICAgICAgdGhpcy5wb2tlclNlbnRJbmRleCA9IDAgICAgICAgICAgICAgICAgICAgICAvLyDlt7Llj5HniYzntKLlvJVcbiAgICAgICAgdGhpcy5wb2tlckhhbmRDb3VudCA9IHRoaXMuc2VhdENvdW50ICogMiAgICAvLyDmiYvniYzmlbDph49cbiAgICAgICAgdGhpcy5wb2tlckNvdW50ID0gdGhpcy5wb2tlckhhbmRDb3VudCArIDUgICAvLyDmiYDmnInniYzmlbDph49cbiAgICAgICAgdGhpcy5jaGlwMkluZGV4ID0gMCAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpKfnm7LkvY3ntKLlvJVcbiAgICB9XG4gICAgb25FbmFibGUoKSB7XG4gICAgICAgIC8vIOWIneWni+WMllxuICAgICAgICB0aGlzLmluaXQoKVxuICAgIH1cbiAgICBvbkNsb3NlZCgpIHtcbiAgICAgICAgV2ViU29ja2V0LnNvY2tldC5jbG9zZSgpXG4gICAgfVxuICAgIC8vIOWIneWni+WMllxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIOWIneWni+WMluW6p+S9jVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VhdENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIC8vIOatpOWkhOmcgOimgeWIneWni+WMluW6p+S9jeWktOWDj1xuICAgICAgICAgICAgdGhpcy5zZWF0cy5wdXNoKHRoaXMuZ2V0Q2hpbGRCeU5hbWUoYHNlYXQke2l9YCkpXG4gICAgICAgIH1cbiAgICAgICAgV2ViU29ja2V0Lmdsb2JhbERhdGEuc2VhdHMgPSB0aGlzLnNlYXRzXG4gICAgICAgIC8vIOWKoOi9vem8oOagh+eCueWHu+S6i+S7tlxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5vbk1vdXNlRG93bilcbiAgICB9XG4gICAgLy8g5ri45oiP5ZCv5YqoXG4gICAgZ2FtZVN0YXJ0KCkge1xuICAgICAgICAvLyDmr4/kurrlj5HkuKTlvKDniYxcbiAgICAgICAgTGF5YS50aW1lci5sb29wKDMwMCwgdGhpcywgdGhpcy5vblNlbmRQb2tlcikgIC8vIOavjzMwMOavq+W+queOr+S4gOasoVxuICAgICAgICAvLyBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxMCwgdGhpcywgdGhpcy5vbkxvb3ApIC8vIOavjzEw5bin5b6q546v5LiA5qyhXG4gICAgfVxuICAgIC8vIOWPkeeJjFxuICAgIG9uU2VuZFBva2VyKCkge1xuICAgICAgICB0aGlzLnBva2Vyc1t0aGlzLnBva2VyU2VudEluZGV4XS5zZW5kKHRoaXMucG9rZXJTZW50SW5kZXgpXG4gICAgICAgIHRoaXMucG9rZXJTZW50SW5kZXgrK1xuICAgICAgICAvLyDmiYvniYzlj5HniYznu5PmnZ9cbiAgICAgICAgaWYgKHRoaXMucG9rZXJTZW50SW5kZXggPT0gdGhpcy5wb2tlckhhbmRDb3VudCkge1xuICAgICAgICAgICAgLy8g6ZqQ6JeP5Ymp5L2Z54mM77yM5Li65bGV5byA5YWs54mM5YGa5YeG5aSHXG4gICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gdGhpcy5wb2tlclNlbnRJbmRleCArIDE7IGkgPD0gMjI7IGkrKykge1xuICAgICAgICAgICAgLy8gICAgIHRoaXMucG9rZXJzW2ldLmhpZGUoKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLm9uU2VuZFBva2VyKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6byg5qCH54K55Ye75LqL5Lu2XG4gICAgb25Nb3VzZURvd24oKSB7XG4gICAgICAgIC8vIOavj+WxgOa4uOaIj+aWsOW8gOWni++8jOW5tuS4lOWwseWdkOS6uuaVsOWkp+S6jjJcbiAgICAgICAgaWYgKHRoaXMucG9rZXJTZW50SW5kZXggPT0gMCAmJiBXZWJTb2NrZXQuZ2xvYmFsRGF0YS5pc0JlZ2luKSB7XG4gICAgICAgICAgICAvLyDliJ3lp4vljJbniYznu4RcbiAgICAgICAgICAgIFdlYlNvY2tldC5zZW5kKHsgbWV0aG9kOiAnU0VORF9DQVJEJywgY291bnQ6IHRoaXMucG9rZXJDb3VudCB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnBva2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9rZXIgPSB7fVxuICAgICAgICAgICAgICAgICAgICAvLyDmiYvniYxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCB0aGlzLnBva2VySGFuZENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2tlciA9IG5ldyBQb2tlcih7IHBva2VySW1nOiB0aGlzLmdldENoaWxkQnlOYW1lKGBwb2tlciR7aX1gKSwgc2VhdEltZzogdGhpcy5zZWF0c1tpICUgdGhpcy5zZWF0Q291bnRdLCBkYXRhUG9rZXI6IGRhdGEucG9rZXJzW2ldIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8g5YWs54mMXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9rZXIgPSBuZXcgUG9rZXIoeyBwb2tlckltZzogdGhpcy5nZXRDaGlsZEJ5TmFtZShgcG9rZXIke2l9YCksIGRhdGFQb2tlcjogZGF0YS5wb2tlcnNbaV0gfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBva2Vycy5wdXNoKHBva2VyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyDlkK/liqjmuLjmiI9cbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVTdGFydCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIC8vIOWPkeaUvuWFrOWFseeJjFxuICAgICAgICBpZiAodGhpcy5wb2tlclNlbnRJbmRleCA+PSB0aGlzLnBva2VySGFuZENvdW50ICYmIHRoaXMucG9rZXJTZW50SW5kZXggPCB0aGlzLnBva2VyQ291bnQpIHtcbiAgICAgICAgICAgIExheWEudGltZXIubG9vcCgzMDAsIHRoaXMsIHRoaXMub25TaG93UHVibGljUG9rZXIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hpcDJJbmRleCA+PSB0aGlzLnNlYXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jaGlwMkluZGV4ID0gMFxuICAgICAgICB9XG4gICAgICAgIC8vIOWwj+ebsuenu+WKqOWIsOWkp+ebsuS9jee9rlxuICAgICAgICB0aGlzLmNoaXAxLnggPSB0aGlzLmNoaXAyLnhcbiAgICAgICAgdGhpcy5jaGlwMS55ID0gdGhpcy5jaGlwMi55XG4gICAgICAgIHRoaXMuY2hpcFRleHQxLnggPSB0aGlzLmNoaXBUZXh0Mi54XG4gICAgICAgIHRoaXMuY2hpcFRleHQxLnkgPSB0aGlzLmNoaXBUZXh0Mi55XG4gICAgICAgIC8vIOWkp+ebsumhuuaXtumSiOenu+WKqFxuICAgICAgICB0aGlzLmNoaXAyLnggPSB0aGlzLnNlYXRzW3RoaXMuY2hpcDJJbmRleF0ueCArIDEwXG4gICAgICAgIHRoaXMuY2hpcDIueSA9IHRoaXMuc2VhdHNbdGhpcy5jaGlwMkluZGV4XS55IC0gMzBcbiAgICAgICAgdGhpcy5jaGlwVGV4dDIueCA9IHRoaXMuY2hpcDIueCAtIDEwXG4gICAgICAgIHRoaXMuY2hpcFRleHQyLnkgPSB0aGlzLmNoaXAyLnkgLSAxNVxuICAgICAgICB0aGlzLmNoaXAySW5kZXgrK1xuICAgIH1cblxuICAgIC8vIOWxleW8gOS4ieW8oOWFrOeJjFxuICAgIG9uU2hvd1B1YmxpY1Bva2VyKCkge1xuICAgICAgICB0aGlzLnBva2Vyc1t0aGlzLnBva2VyU2VudEluZGV4XS5zZW5kUHVibGljKHRoaXMucG9rZXJTZW50SW5kZXggLSB0aGlzLnBva2VySGFuZENvdW50KVxuICAgICAgICB0aGlzLnBva2VyU2VudEluZGV4KytcbiAgICAgICAgLy8g5Y+R54mM6KGM5Li657uT5p2fXG4gICAgICAgIGlmICh0aGlzLnBva2VyU2VudEluZGV4ID49IHRoaXMucG9rZXJIYW5kQ291bnQgKyAzKSB7XG4gICAgICAgICAgICBMYXlhLnRpbWVyLmNsZWFyKHRoaXMsIHRoaXMub25TaG93UHVibGljUG9rZXIpXG4gICAgICAgIH1cbiAgICB9XG59Il19
