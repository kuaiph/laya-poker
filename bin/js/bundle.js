var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameView = require("./view/GameView");

var _GameView2 = _interopRequireDefault(_GameView);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("view/GameView.js", _GameView2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 370;
GameConfig.height = 658;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "vertical";
GameConfig.alignV = "middle";
GameConfig.alignH = "center";
GameConfig.startScene = "Game.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./view/GameView":4}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var LayaApp = function () {
    function LayaApp() {
        _classCallCheck(this, LayaApp);

        // // 初始化引擎
        // const WebGL = laya.webgl.WebGL
        // Laya.init(370, 658, WebGL)
        // //设置版本控制类型为使用文件名映射的方式
        // Laya.ResourceVersion.type = Laya.ResourceVersion.FILENAME_VERSION
        // //加载版本信息文件
        // Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.beginLoad))

        //根据IDE设置初始化引擎
        if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        // 设置stage属性
        Laya.stage.scaleMode = Laya.Stage.SCALE_NOSCALE;
        Laya.stage.scaleMode = Laya.Stage.SCALE_FIXED_AUTO;
        Laya.stage.scaleMode = Laya.Stage.SCALE_EXACTFIT;
        Laya.stage.scaleMode = Laya.Stage.SCALE_NOBORDER;
        Laya.stage.scaleMode = Laya.Stage.SCALE_SHOWALL;
        Laya.stage.alignH = Laya.Stage.ALIGN_CENTER;
        Laya.stage.alignW = Laya.Stage.ALIGN_CENTER;
        Laya.stage.screenMode = Laya.Stage.SCREEN_NONE;
        // Laya.stage.bgColor = "#ffffff"
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
        if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
        if (_GameConfig2.default.stat) Laya.Stat.show();
        Laya.alertGlobalError = true;

        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }

    _createClass(LayaApp, [{
        key: "onVersionLoaded",
        value: function onVersionLoaded() {
            //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
            Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
        }
    }, {
        key: "onConfigLoaded",
        value: function onConfigLoaded() {
            //加载IDE指定的场景
            _GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
            // beginLoad()
        }
        // // 加载资源
        // beginLoad() {
        //     // 加载图集
        //     Laya.loader.load("res/atlas/ui.atlas", Laya.Handler.create(this, this.onLoaded), null, Laya.Loader.ATLAS)
        //     // 长连接服务器
        //     LayaApp.socket = new Laya.Socket()
        //     LayaApp.socket.endian = Laya.Byte.LITTLE_ENDIAN//采用小端
        //     LayaApp.socket.connectByUrl('ws://localhost:5000/socket/poker')
        //     LayaApp.socket.on(Laya.Event.OPEN, this, (e) => {
        //         console.log('连接建立')
        //     })
        //     LayaApp.socket.on(Laya.Event.MESSAGE, this, (msg) => {
        //         console.log(`数据接收 ${msg}`)
        //     })
        //     LayaApp.socket.on(Laya.Event.CLOSE, this, (e) => {
        //         console.log('连接关闭')
        //     })
        //     LayaApp.socket.on(Laya.Event.ERROR, this, (e) => {
        //         console.error('连接出错')
        //     })
        //     // 播放背景音乐
        //     // Laya.SoundManager.playMusic("res/sounds/bgm.mp3", 0, null)
        // }
        // // 加载完成回调
        // onLoaded() {
        //     // 启动游戏界面
        //     LayaApp.gameView = new GameView()
        //     Laya.stage.addChild(LayaApp.gameView)
        //     // LayaApp.gameStartView = new GameStartView()
        //     // Laya.stage.addChild(LayaApp.gameStartView)
        // }

    }]);

    return LayaApp;
}();

// 实例化游戏应用


new LayaApp();

},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * 扑克类
 */
var Poker = function () {
    function Poker(inparam) {
        _classCallCheck(this, Poker);

        this.pokerImg = inparam.pokerImg;
        this.seatImg = inparam.seatImg;
        // this.reset()
    }
    // 重置


    _createClass(Poker, [{
        key: "reset",
        value: function reset() {}
        // 隐藏

    }, {
        key: "hide",
        value: function hide() {
            this.pokerImg.visible = false;
        }
        // 发牌

    }, {
        key: "send",
        value: function send(pokerSentIndex) {
            var x = this.seatImg.x;
            var isMe = this.seatImg.y == 608 ? true : false;
            if (isMe) {
                pokerSentIndex == 0 ? x += 50 : x += 100;
            }
            Laya.Tween.to(this.pokerImg, { x: x, y: this.seatImg.y }, 500, Laya.Ease.strongOut, Laya.Handler.create(this, this.sendComplete, [isMe]));
        }
        // 发牌完成

    }, {
        key: "sendComplete",
        value: function sendComplete(isMe) {
            if (!isMe) {
                this.pokerImg.visible = false;
            }
        }
        // 发公共牌

    }, {
        key: "sendPublic",
        value: function sendPublic(publicIndex) {
            var x = this.pokerImg.x;
            var y = this.pokerImg.y + 80;
            switch (publicIndex) {
                case 0:
                    x -= 120;
                    break;
                case 1:
                    x -= 60;
                    break;
                case 2:
                    break;
                case 3:
                    x += 60;
                    break;
                case 4:
                    x += 120;
                    break;
                default:
                    break;
            }
            Laya.Tween.to(this.pokerImg, { x: x, y: y }, 500, Laya.Ease.strongOut, Laya.Handler.create(this, this.sendPublicComplete));
        }
    }, {
        key: "sendPublicComplete",
        value: function sendPublicComplete() {}
    }]);

    return Poker;
}();

exports.default = Poker;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Poker = require('../sprite/Poker');

var _Poker2 = _interopRequireDefault(_Poker);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * 游戏主界面类
 * 载入扑克桌
 */
var GameView = function (_Laya$Scene) {
    _inherits(GameView, _Laya$Scene);

    function GameView() {
        _classCallCheck(this, GameView);

        //设置单例的引用方式，方便其他类引用
        var _this = _possibleConstructorReturn(this, (GameView.__proto__ || Object.getPrototypeOf(GameView)).call(this));

        GameView.instance = _this;
        _this.pokers = [];
        _this.seats = [];
        _this.pokerSentIndex = 0;
        _this.seatCount = 9;
        return _this;
    }

    _createClass(GameView, [{
        key: 'onEnable',
        value: function onEnable() {
            // 初始化
            this.init();
            // 启动游戏，发牌
            this.gameStart();
        }
        // 初始化

    }, {
        key: 'init',
        value: function init() {
            // 居中显示
            this.centerX = 0;
            this.centerY = 0;
            // 初始化桌位
            for (var i = 0; i < this.seatCount; i++) {
                // console.log(this.getChildByName(`seat${i}`))
                this.seats.push(this.getChildByName('seat' + i));
            }
            // 初始化牌组
            for (var _i = 0; _i < this.seatCount * 2; _i++) {
                // console.log(this.getChildByName(`poker${i}`))
                var poker = new _Poker2.default({ pokerImg: this.getChildByName('poker' + _i), seatImg: this.seats[_i % this.seatCount] });
                this.pokers.push(poker);
            }
            // 初始化公牌
            for (var _i2 = this.seatCount * 2; _i2 < this.seatCount * 2 + 5; _i2++) {
                // console.log(this.getChildByName(`poker${i}`))
                var _poker = new _Poker2.default({ pokerImg: this.getChildByName('poker' + _i2) });
                this.pokers.push(_poker);
            }
            // 加载鼠标点击事件
            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDown);
        }
        // 游戏启动

    }, {
        key: 'gameStart',
        value: function gameStart() {
            // 每人发两张牌
            Laya.timer.loop(300, this, this.onSendPoker); // 每300毫循环一次
            // LayaApp.socket.send(JSON.stringify({ method: 'SEND_CARD', count: 18 }))
            // Laya.timer.frameLoop(10, this, this.onLoop) // 每10帧循环一次
        }
        // 发牌

    }, {
        key: 'onSendPoker',
        value: function onSendPoker() {
            if (this.pokers[this.pokerSentIndex].seatImg.y == 608) {
                this.pokers[this.pokerSentIndex].pokerImg.skin = 'ui/1C.png';
            }
            this.pokers[this.pokerSentIndex].send(this.pokerSentIndex);
            this.pokerSentIndex++;
            // 发牌结束
            if (this.pokerSentIndex == 18) {
                // 隐藏剩余牌，为展开公牌做准备
                // for (let i = this.pokerSentIndex + 1; i <= 22; i++) {
                //     this.pokers[i].hide()
                // }
                Laya.timer.clear(this, this.onSendPoker);
            }
        }

        // 鼠标点击事件

    }, {
        key: 'onMouseDown',
        value: function onMouseDown() {
            if (this.pokerSentIndex >= 18 && this.pokerSentIndex <= 22) {
                Laya.timer.loop(300, this, this.onShowThreePoker);
            }
        }

        // 展开三张公牌

    }, {
        key: 'onShowThreePoker',
        value: function onShowThreePoker() {
            this.pokers[this.pokerSentIndex].sendPublic(this.pokerSentIndex - 18);
            this.pokerSentIndex++;
            if (this.pokerSentIndex > 20) {
                Laya.timer.clear(this, this.onShowThreePoker);
            }
        }
        // 展开四张公牌

    }, {
        key: 'onShowFourPoker',
        value: function onShowFourPoker() {}
        // 展开五张公牌

    }, {
        key: 'onShowFivePoker',
        value: function onShowFivePoker() {}
    }]);

    return GameView;
}(Laya.Scene);

exports.default = GameView;

},{"../sprite/Poker":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9MYXlhQWlySURFX2JldGEuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLmpzIiwic3JjL0xheWFBcHAuanMiLCJzcmMvc3ByaXRlL1Bva2VyLmpzIiwic3JjL3ZpZXcvR2FtZVZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztxakJDVkE7OztBQUNBOzs7Ozs7OztJQUVxQixVOzs7Ozs7OytCQUNIO0FBQ1Y7QUFDQSxnQkFBSSxNQUFNLEtBQUssVUFBTCxDQUFnQixRQUExQjtBQUNOLGdCQUFJLGtCQUFKLEVBQXVCLGtCQUF2QjtBQUNHOzs7Ozs7a0JBTGdCLFU7O0FBT3JCLFdBQVcsS0FBWCxHQUFtQixHQUFuQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixHQUFwQjtBQUNBLFdBQVcsU0FBWCxHQUFzQixZQUF0QjtBQUNBLFdBQVcsVUFBWCxHQUF3QixVQUF4QjtBQUNBLFdBQVcsTUFBWCxHQUFvQixRQUFwQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixRQUFwQjtBQUNBLFdBQVcsVUFBWCxHQUF3QixZQUF4QjtBQUNBLFdBQVcsU0FBWCxHQUF1QixFQUF2QjtBQUNBLFdBQVcsS0FBWCxHQUFtQixLQUFuQjtBQUNBLFdBQVcsSUFBWCxHQUFrQixLQUFsQjtBQUNBLFdBQVcsWUFBWCxHQUEwQixLQUExQjtBQUNBLFdBQVcsaUJBQVgsR0FBK0IsSUFBL0I7O0FBRUEsV0FBVyxJQUFYOzs7Ozs7O0FDdkJBOzs7Ozs7OztJQUVNLE87QUFDRix1QkFBYztBQUFBOztBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBSSxPQUFPLFFBQVAsQ0FBSixFQUFzQixPQUFPLElB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QUFLLGNBQUwsR0FBc0IsRUFBbEU7QUFDQSxpQkFBSyxjQUFMO0FBQ0EsZ0JBQUksS0FBSyxjQUFMLEdBQXNCLEVBQTFCLEVBQThCO0FBQzFCLHFCQUFLLEtBQUwsQ0FBVyxLQUFYLENBQWlCLElBQWpCLEVBQXVCLEtBQUssZ0JBQTVCO0FBQ0g7QUFDSjtBQUNEOzs7OzBDQUNrQixDQUVqQjtBQUNEOzs7OzBDQUNrQixDQUVqQjs7OztFQXZGaUMsS0FBSyxLOztrQkFBdEIsUSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEdhbWVWaWV3IGZyb20gXCIuL3ZpZXcvR2FtZVZpZXdcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZyB7XHJcbiAgICBzdGF0aWMgaW5pdCgpIHtcclxuICAgICAgICAvL+azqOWGjFNjcmlwdOaIluiAhVJ1bnRpbWXlvJXnlKhcclxuICAgICAgICBsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cdFx0cmVnKFwidmlldy9HYW1lVmlldy5qc1wiLEdhbWVWaWV3KTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLndpZHRoID0gMzcwO1xyXG5HYW1lQ29uZmlnLmhlaWdodCA9IDY1ODtcclxuR2FtZUNvbmZpZy5zY2FsZU1vZGUgPVwiZml4ZWR3aWR0aFwiO1xyXG5HYW1lQ29uZmlnLnNjcmVlbk1vZGUgPSBcInZlcnRpY2FsXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJtaWRkbGVcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImNlbnRlclwiO1xyXG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcIkdhbWUuc2NlbmVcIjtcclxuR2FtZUNvbmZpZy5zY2VuZVJvb3QgPSBcIlwiO1xyXG5HYW1lQ29uZmlnLmRlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuc3RhdCA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uID0gdHJ1ZTtcclxuXHJcbkdhbWVDb25maWcuaW5pdCgpO1xyXG4iLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCJcclxuXHJcbmNsYXNzIExheWFBcHAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gLy8g5Yid5aeL5YyW5byV5pOOXHJcbiAgICAgICAgLy8gY29uc3QgV2ViR0wgPSBsYXlhLndlYmdsLldlYkdMXHJcbiAgICAgICAgLy8gTGF5YS5pbml0KDM3MCwgNjU4LCBXZWJHTClcclxuICAgICAgICAvLyAvL+iuvue9rueJiOacrOaOp+WItuexu+Wei+S4uuS9v+eUqOaWh+S7tuWQjeaYoOWwhOeahOaWueW8j1xyXG4gICAgICAgIC8vIExheWEuUmVzb3VyY2VWZXJzaW9uLnR5cGUgPSBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OXHJcbiAgICAgICAgLy8gLy/liqDovb3niYjmnKzkv6Hmga/mlofku7ZcclxuICAgICAgICAvLyBMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLmJlZ2luTG9hZCkpXHJcblxyXG4gICAgICAgIC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHJcbiAgICAgICAgaWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG4gICAgICAgIGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG4gICAgICAgIExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG4gICAgICAgIExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG4gICAgICAgIC8vIOiuvue9rnN0YWdl5bGe5oCnXHJcbiAgICAgICAgTGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBMYXlhLlN0YWdlLlNDQUxFX05PU0NBTEVcclxuICAgICAgICBMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IExheWEuU3RhZ2UuU0NBTEVfRklYRURfQVVUT1xyXG4gICAgICAgIExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gTGF5YS5TdGFnZS5TQ0FMRV9FWEFDVEZJVFxyXG4gICAgICAgIExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gTGF5YS5TdGFnZS5TQ0FMRV9OT0JPUkRFUlxyXG4gICAgICAgIExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gTGF5YS5TdGFnZS5TQ0FMRV9TSE9XQUxMXHJcbiAgICAgICAgTGF5YS5zdGFnZS5hbGlnbkggPSBMYXlhLlN0YWdlLkFMSUdOX0NFTlRFUlxyXG4gICAgICAgIExheWEuc3RhZ2UuYWxpZ25XID0gTGF5YS5TdGFnZS5BTElHTl9DRU5URVJcclxuICAgICAgICBMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBMYXlhLlN0YWdlLlNDUkVFTl9OT05FXHJcbiAgICAgICAgLy8gTGF5YS5zdGFnZS5iZ0NvbG9yID0gXCIjZmZmZmZmXCJcclxuICAgICAgICAvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcbiAgICAgICAgTGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuICAgICAgICAvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuICAgICAgICBpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG4gICAgICAgIGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcbiAgICAgICAgaWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuICAgICAgICBMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuICAgICAgICAvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG4gICAgICAgIExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcbiAgICB9XHJcbiAgICBvblZlcnNpb25Mb2FkZWQoKSB7XHJcbiAgICAgICAgLy/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuICAgICAgICBMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG4gICAgfVxyXG4gICAgb25Db25maWdMb2FkZWQoKSB7XHJcbiAgICAgICAgLy/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuICAgICAgICBHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcbiAgICAgICAgLy8gYmVnaW5Mb2FkKClcclxuICAgIH1cclxuICAgIC8vIC8vIOWKoOi9vei1hOa6kFxyXG4gICAgLy8gYmVnaW5Mb2FkKCkge1xyXG4gICAgLy8gICAgIC8vIOWKoOi9veWbvumbhlxyXG4gICAgLy8gICAgIExheWEubG9hZGVyLmxvYWQoXCJyZXMvYXRsYXMvdWkuYXRsYXNcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uTG9hZGVkKSwgbnVsbCwgTGF5YS5Mb2FkZXIuQVRMQVMpXHJcbiAgICAvLyAgICAgLy8g6ZW/6L+e5o6l5pyN5Yqh5ZmoXHJcbiAgICAvLyAgICAgTGF5YUFwcC5zb2NrZXQgPSBuZXcgTGF5YS5Tb2NrZXQoKVxyXG4gICAgLy8gICAgIExheWFBcHAuc29ja2V0LmVuZGlhbiA9IExheWEuQnl0ZS5MSVRUTEVfRU5ESUFOLy/ph4fnlKjlsI/nq69cclxuICAgIC8vICAgICBMYXlhQXBwLnNvY2tldC5jb25uZWN0QnlVcmwoJ3dzOi8vbG9jYWxob3N0OjUwMDAvc29ja2V0L3Bva2VyJylcclxuICAgIC8vICAgICBMYXlhQXBwLnNvY2tldC5vbihMYXlhLkV2ZW50Lk9QRU4sIHRoaXMsIChlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfov57mjqXlu7rnq4snKVxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyAgICAgTGF5YUFwcC5zb2NrZXQub24oTGF5YS5FdmVudC5NRVNTQUdFLCB0aGlzLCAobXNnKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGDmlbDmja7mjqXmlLYgJHttc2d9YClcclxuICAgIC8vICAgICB9KVxyXG4gICAgLy8gICAgIExheWFBcHAuc29ja2V0Lm9uKExheWEuRXZlbnQuQ0xPU0UsIHRoaXMsIChlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfov57mjqXlhbPpl60nKVxyXG4gICAgLy8gICAgIH0pXHJcbiAgICAvLyAgICAgTGF5YUFwcC5zb2NrZXQub24oTGF5YS5FdmVudC5FUlJPUiwgdGhpcywgKGUpID0+IHtcclxuICAgIC8vICAgICAgICAgY29uc29sZS5lcnJvcign6L+e5o6l5Ye66ZSZJylcclxuICAgIC8vICAgICB9KVxyXG4gICAgLy8gICAgIC8vIOaSreaUvuiDjOaZr+mfs+S5kFxyXG4gICAgLy8gICAgIC8vIExheWEuU291bmRNYW5hZ2VyLnBsYXlNdXNpYyhcInJlcy9zb3VuZHMvYmdtLm1wM1wiLCAwLCBudWxsKVxyXG4gICAgLy8gfVxyXG4gICAgLy8gLy8g5Yqg6L295a6M5oiQ5Zue6LCDXHJcbiAgICAvLyBvbkxvYWRlZCgpIHtcclxuICAgIC8vICAgICAvLyDlkK/liqjmuLjmiI/nlYzpnaJcclxuICAgIC8vICAgICBMYXlhQXBwLmdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KClcclxuICAgIC8vICAgICBMYXlhLnN0YWdlLmFkZENoaWxkKExheWFBcHAuZ2FtZVZpZXcpXHJcbiAgICAvLyAgICAgLy8gTGF5YUFwcC5nYW1lU3RhcnRWaWV3ID0gbmV3IEdhbWVTdGFydFZpZXcoKVxyXG4gICAgLy8gICAgIC8vIExheWEuc3RhZ2UuYWRkQ2hpbGQoTGF5YUFwcC5nYW1lU3RhcnRWaWV3KVxyXG4gICAgLy8gfVxyXG59XHJcblxyXG4vLyDlrp7kvovljJbmuLjmiI/lupTnlKhcclxubmV3IExheWFBcHAoKVxyXG5cclxuIiwiLyoqXG4gKiDmiZHlhYvnsbtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9rZXIge1xuICAgIGNvbnN0cnVjdG9yKGlucGFyYW0pIHtcbiAgICAgICAgdGhpcy5wb2tlckltZyA9IGlucGFyYW0ucG9rZXJJbWdcbiAgICAgICAgdGhpcy5zZWF0SW1nID0gaW5wYXJhbS5zZWF0SW1nXG4gICAgICAgIC8vIHRoaXMucmVzZXQoKVxuICAgIH1cbiAgICAvLyDph43nva5cbiAgICByZXNldCgpIHtcbiAgICB9XG4gICAgLy8g6ZqQ6JePXG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5wb2tlckltZy52aXNpYmxlID0gZmFsc2VcbiAgICB9XG4gICAgLy8g5Y+R54mMXG4gICAgc2VuZChwb2tlclNlbnRJbmRleCkge1xuICAgICAgICBsZXQgeCA9IHRoaXMuc2VhdEltZy54XG4gICAgICAgIGxldCBpc01lID0gdGhpcy5zZWF0SW1nLnkgPT0gNjA4ID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIGlmIChpc01lKSB7XG4gICAgICAgICAgICBwb2tlclNlbnRJbmRleCA9PSAwID8geCArPSA1MCA6IHggKz0gMTAwXG4gICAgICAgIH1cbiAgICAgICAgTGF5YS5Ud2Vlbi50byh0aGlzLnBva2VySW1nLCB7IHgsIHk6IHRoaXMuc2VhdEltZy55IH0sIDUwMCwgTGF5YS5FYXNlLnN0cm9uZ091dCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLnNlbmRDb21wbGV0ZSwgW2lzTWVdKSlcbiAgICB9XG4gICAgLy8g5Y+R54mM5a6M5oiQXG4gICAgc2VuZENvbXBsZXRlKGlzTWUpIHtcbiAgICAgICAgaWYgKCFpc01lKSB7XG4gICAgICAgICAgICB0aGlzLnBva2VySW1nLnZpc2libGUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOWPkeWFrOWFseeJjFxuICAgIHNlbmRQdWJsaWMocHVibGljSW5kZXgpIHtcbiAgICAgICAgbGV0IHggPSB0aGlzLnBva2VySW1nLnhcbiAgICAgICAgbGV0IHkgPSB0aGlzLnBva2VySW1nLnkgKyA4MFxuICAgICAgICBzd2l0Y2ggKHB1YmxpY0luZGV4KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgeCAtPSAxMjBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB4IC09IDYwXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgeCArPSA2MFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHggKz0gMTIwXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIExheWEuVHdlZW4udG8odGhpcy5wb2tlckltZywgeyB4LCB5IH0sIDUwMCwgTGF5YS5FYXNlLnN0cm9uZ091dCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLnNlbmRQdWJsaWNDb21wbGV0ZSkpXG4gICAgfVxuICAgIHNlbmRQdWJsaWNDb21wbGV0ZSgpIHtcblxuICAgIH1cbn0iLCJpbXBvcnQgUG9rZXIgZnJvbSAnLi4vc3ByaXRlL1Bva2VyJ1xuXG4vKipcbiAqIOa4uOaIj+S4u+eVjOmdouexu1xuICog6L295YWl5omR5YWL5qGMXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVWaWV3IGV4dGVuZHMgTGF5YS5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgLy/orr7nva7ljZXkvovnmoTlvJXnlKjmlrnlvI/vvIzmlrnkvr/lhbbku5bnsbvlvJXnlKhcbiAgICAgICAgR2FtZVZpZXcuaW5zdGFuY2UgPSB0aGlzXG4gICAgICAgIHRoaXMucG9rZXJzID0gW11cbiAgICAgICAgdGhpcy5zZWF0cyA9IFtdXG4gICAgICAgIHRoaXMucG9rZXJTZW50SW5kZXggPSAwXG4gICAgICAgIHRoaXMuc2VhdENvdW50ID0gOVxuICAgIH1cbiAgICBvbkVuYWJsZSgpIHtcbiAgICAgICAgLy8g5Yid5aeL5YyWXG4gICAgICAgIHRoaXMuaW5pdCgpXG4gICAgICAgIC8vIOWQr+WKqOa4uOaIj++8jOWPkeeJjFxuICAgICAgICB0aGlzLmdhbWVTdGFydCgpXG4gICAgfVxuICAgIC8vIOWIneWni+WMllxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIOWxheS4reaYvuekulxuICAgICAgICB0aGlzLmNlbnRlclggPSAwXG4gICAgICAgIHRoaXMuY2VudGVyWSA9IDBcbiAgICAgICAgLy8g5Yid5aeL5YyW5qGM5L2NXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWF0Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5nZXRDaGlsZEJ5TmFtZShgc2VhdCR7aX1gKSlcbiAgICAgICAgICAgIHRoaXMuc2VhdHMucHVzaCh0aGlzLmdldENoaWxkQnlOYW1lKGBzZWF0JHtpfWApKVxuICAgICAgICB9XG4gICAgICAgIC8vIOWIneWni+WMlueJjOe7hFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VhdENvdW50ICogMjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldENoaWxkQnlOYW1lKGBwb2tlciR7aX1gKSlcbiAgICAgICAgICAgIGxldCBwb2tlciA9IG5ldyBQb2tlcih7IHBva2VySW1nOiB0aGlzLmdldENoaWxkQnlOYW1lKGBwb2tlciR7aX1gKSwgc2VhdEltZzogdGhpcy5zZWF0c1tpICUgdGhpcy5zZWF0Q291bnRdIH0pXG4gICAgICAgICAgICB0aGlzLnBva2Vycy5wdXNoKHBva2VyKVxuICAgICAgICB9XG4gICAgICAgIC8vIOWIneWni+WMluWFrOeJjFxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zZWF0Q291bnQgKiAyOyBpIDwgdGhpcy5zZWF0Q291bnQgKiAyICsgNTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldENoaWxkQnlOYW1lKGBwb2tlciR7aX1gKSlcbiAgICAgICAgICAgIGxldCBwb2tlciA9IG5ldyBQb2tlcih7IHBva2VySW1nOiB0aGlzLmdldENoaWxkQnlOYW1lKGBwb2tlciR7aX1gKSB9KVxuICAgICAgICAgICAgdGhpcy5wb2tlcnMucHVzaChwb2tlcilcbiAgICAgICAgfVxuICAgICAgICAvLyDliqDovb3pvKDmoIfngrnlh7vkuovku7ZcbiAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50Lk1PVVNFX0RPV04sIHRoaXMsIHRoaXMub25Nb3VzZURvd24pXG4gICAgfVxuICAgIC8vIOa4uOaIj+WQr+WKqFxuICAgIGdhbWVTdGFydCgpIHtcbiAgICAgICAgLy8g5q+P5Lq65Y+R5Lik5byg54mMXG4gICAgICAgIExheWEudGltZXIubG9vcCgzMDAsIHRoaXMsIHRoaXMub25TZW5kUG9rZXIpICAvLyDmr48zMDDmr6vlvqrnjq/kuIDmrKFcbiAgICAgICAgLy8gTGF5YUFwcC5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IG1ldGhvZDogJ1NFTkRfQ0FSRCcsIGNvdW50OiAxOCB9KSlcbiAgICAgICAgLy8gTGF5YS50aW1lci5mcmFtZUxvb3AoMTAsIHRoaXMsIHRoaXMub25Mb29wKSAvLyDmr48xMOW4p+W+queOr+S4gOasoVxuICAgIH1cbiAgICAvLyDlj5HniYxcbiAgICBvblNlbmRQb2tlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucG9rZXJzW3RoaXMucG9rZXJTZW50SW5kZXhdLnNlYXRJbWcueSA9PSA2MDgpIHtcbiAgICAgICAgICAgIHRoaXMucG9rZXJzW3RoaXMucG9rZXJTZW50SW5kZXhdLnBva2VySW1nLnNraW4gPSAndWkvMUMucG5nJ1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9rZXJzW3RoaXMucG9rZXJTZW50SW5kZXhdLnNlbmQodGhpcy5wb2tlclNlbnRJbmRleClcbiAgICAgICAgdGhpcy5wb2tlclNlbnRJbmRleCsrXG4gICAgICAgIC8vIOWPkeeJjOe7k+adn1xuICAgICAgICBpZiAodGhpcy5wb2tlclNlbnRJbmRleCA9PSAxOCkge1xuICAgICAgICAgICAgLy8g6ZqQ6JeP5Ymp5L2Z54mM77yM5Li65bGV5byA5YWs54mM5YGa5YeG5aSHXG4gICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gdGhpcy5wb2tlclNlbnRJbmRleCArIDE7IGkgPD0gMjI7IGkrKykge1xuICAgICAgICAgICAgLy8gICAgIHRoaXMucG9rZXJzW2ldLmhpZGUoKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLm9uU2VuZFBva2VyKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6byg5qCH54K55Ye75LqL5Lu2XG4gICAgb25Nb3VzZURvd24oKSB7XG4gICAgICAgIGlmICh0aGlzLnBva2VyU2VudEluZGV4ID49IDE4ICYmIHRoaXMucG9rZXJTZW50SW5kZXggPD0gMjIpIHtcbiAgICAgICAgICAgIExheWEudGltZXIubG9vcCgzMDAsIHRoaXMsIHRoaXMub25TaG93VGhyZWVQb2tlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWxleW8gOS4ieW8oOWFrOeJjFxuICAgIG9uU2hvd1RocmVlUG9rZXIoKSB7XG4gICAgICAgIHRoaXMucG9rZXJzW3RoaXMucG9rZXJTZW50SW5kZXhdLnNlbmRQdWJsaWModGhpcy5wb2tlclNlbnRJbmRleCAtIDE4KVxuICAgICAgICB0aGlzLnBva2VyU2VudEluZGV4KytcbiAgICAgICAgaWYgKHRoaXMucG9rZXJTZW50SW5kZXggPiAyMCkge1xuICAgICAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLm9uU2hvd1RocmVlUG9rZXIpXG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8g5bGV5byA5Zub5byg5YWs54mMXG4gICAgb25TaG93Rm91clBva2VyKCkge1xuXG4gICAgfVxuICAgIC8vIOWxleW8gOS6lOW8oOWFrOeJjFxuICAgIG9uU2hvd0ZpdmVQb2tlcigpIHtcblxuICAgIH1cbn0iXX0=
